<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ComunidadCarta</title>

<!-- ========================= -->
<!--        ESTILOS            -->
<!-- ========================= -->
<style>
/* RESET */
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:Arial, Helvetica, sans-serif;
}

/* BODY */
body{
    background:#0b0b0b;
    color:#ffffff;
    min-height:100vh;
}

/* HEADER */
header{
    background:#111;
    padding:20px;
    text-align:center;
    border-bottom:3px solid #00ffcc;
}

header h1{
    font-size:32px;
    letter-spacing:2px;
}

header p{
    font-size:14px;
    opacity:0.8;
}

/* NAV */
nav{
    display:flex;
    justify-content:center;
    gap:10px;
    flex-wrap:wrap;
    background:#0f0f0f;
    padding:10px;
    border-bottom:1px solid #222;
}

nav button{
    padding:12px 18px;
    background:#1a1a1a;
    color:#fff;
    border:1px solid #00ffcc;
    cursor:pointer;
    border-radius:6px;
    transition:0.2s;
    font-size:14px;
}

nav button:hover{
    background:#00ffcc;
    color:#000;
}

/* MAIN */
main{
    padding:20px;
}

/* SECTIONS */
section{
    display:none;
    animation:fade 0.3s ease-in-out;
}

section.active{
    display:block;
}

/* CARDS */
.card{
    background:#121212;
    border:1px solid #222;
    padding:15px;
    border-radius:8px;
    margin-bottom:15px;
    box-shadow:0 0 10px rgba(0,255,204,0.1);
}

/* TITLES */
h2{
    margin-bottom:10px;
    color:#00ffcc;
}

/* INPUTS */
input, textarea, select{
    width:100%;
    padding:10px;
    margin:5px 0 10px 0;
    background:#0d0d0d;
    border:1px solid #333;
    color:#fff;
    border-radius:4px;
}

button.action{
    background:#00ffcc;
    color:#000;
    padding:10px 15px;
    border:none;
    border-radius:5px;
    cursor:pointer;
    font-weight:bold;
}

/* RANKING */
.rank-item{
    display:flex;
    justify-content:space-between;
    padding:8px;
    border-bottom:1px solid #222;
}

/* FOOTER */
footer{
    text-align:center;
    padding:20px;
    font-size:12px;
    opacity:0.6;
}

/* ANIMATION */
@keyframes fade{
    from{opacity:0;}
    to{opacity:1;}
}
</style>
</head>

<body>

<header>
    <h1>COMUNIDADCARTA</h1>
    <p>Proyecto pequeÃ±o, no oficial ni relacionado con ninguna marca</p>
</header>

<nav>
    <button onclick="showSection('inicio')">Inicio</button>
    <button onclick="showSection('catalogo')">CatÃ¡logo</button>
    <button onclick="showSection('ranking')">Ranking</button>
    <button onclick="showSection('encuestas')">Encuestas</button>
    <button onclick="showSection('codigos')">CÃ³digos</button>
    <button onclick="showSection('anuncios')">Anuncios</button>
    <button onclick="showSection('admin')">Admin</button>
</nav>

<main>

<!-- ========================= -->
<!--         INICIO            -->
<!-- ========================= -->
<section id="inicio" class="active">
    <div class="card">
        <h2>Bienvenido</h2>
        <p>Escanea tus cartas, participa en encuestas, sube en el ranking y descubre recompensas.</p>
    </div>
</section>

<!-- ========================= -->
<!--        CATALOGO           -->
<!-- ========================= -->
<section id="catalogo">
    <div class="card">
        <h2>CatÃ¡logo de Sobres</h2>
        <p><b>TITAN</b> â€” 12 cartas comunes, 5 raras, 1 Ã©pica, posibilidad mÃ­tica, bonus XP</p>
        <p><b>ALFA</b> â€” 8 comunes, 3 raras, bonus puntos ranking</p>
        <p><b>OMEGA</b> â€” 15 cartas, evento especial, multiplicador x2</p>
    </div>
</section>

<!-- ========================= -->
<!--        RANKING            -->
<!-- ========================= -->
<section id="ranking">
    <div class="card">
        <h2>Ranking Global (Tiempo Real)</h2>
        <div id="ranking-list"></div>
    </div>
</section>

<!-- ========================= -->
<!--       ENCUESTAS           -->
<!-- ========================= -->
<section id="encuestas">
    <div class="card">
        <h2>Encuestas</h2>
        <p>Â¿Te gusta el proyecto?</p>
        <button class="action" onclick="vote('si')">SÃ­</button>
        <button class="action" onclick="vote('no')">No</button>
        <p id="encuesta-resultado"></p>
    </div>
</section>

<!-- ========================= -->
<!--        CODIGOS            -->
<!-- ========================= -->
<section id="codigos">
    <div class="card">
        <h2>Canjear CÃ³digo</h2>
        <input type="text" id="codigoInput" placeholder="Ingresa tu cÃ³digo">
        <button class="action" onclick="canjearCodigo()">Canjear</button>
        <p id="codigoResultado"></p>
    </div>
</section>

<!-- ========================= -->
<!--        ANUNCIOS           -->
<!-- ========================= -->
<section id="anuncios">
    <div class="card">
        <h2>Anuncios</h2>
        <div id="anuncios-list"></div>
    </div>
</section>

<!-- ========================= -->
<!--         ADMIN             -->
<!-- ========================= -->
<section id="admin">
    <div class="card">
        <h2>Panel Admin</h2>
        <input type="text" id="adminUser" placeholder="Usuario">
        <input type="password" id="adminPass" placeholder="ContraseÃ±a">
        <button class="action" onclick="loginAdmin()">Entrar</button>
        <p id="adminEstado"></p>
    </div>
</section>

</main>

<footer>
    ComunidadCarta Â© 2026 â€” Uso educativo y comunitario
</footer>

<!-- ========================= -->
<!--        SCRIPTS            -->
<!-- ========================= -->
<script type="module">

/* ========================= */
/*        FIREBASE            */
/* ========================= */
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getDatabase, ref, set, onValue, push } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

const firebaseConfig = {
    apiKey: "API_KEY",
    authDomain: "PROJECT.firebaseapp.com",
    databaseURL: "https://PROJECT-default-rtdb.firebaseio.com",
    projectId: "PROJECT",
    storageBucket: "PROJECT.appspot.com",
    messagingSenderId: "000000",
    appId: "APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

/* ========================= */
/*        NAVEGACION          */
/* ========================= */
window.showSection = function(id){
    document.querySelectorAll("section").forEach(sec=>{
        sec.classList.remove("active");
    });
    document.getElementById(id).classList.add("active");
}

/* ========================= */
/*        RANKING             */
/* ========================= */
const rankingRef = ref(db, "ranking");

onValue(rankingRef, snapshot=>{
    const data = snapshot.val() || {};
    const list = document.getElementById("ranking-list");
    list.innerHTML = "";
    Object.values(data).sort((a,b)=>b.puntos-a.puntos).forEach(d=>{
        const div = document.createElement("div");
        div.className = "rank-item";
        div.innerHTML = `<span>${d.nombre}</span><span>${d.puntos} pts</span>`;
        list.appendChild(div);
    });
});

/* ========================= */
/*        ENCUESTAS           */
/* ========================= */
window.vote = function(opcion){
    const r = ref(db, "encuestas/"+opcion);
    set(r, Date.now());
    document.getElementById("encuesta-resultado").innerText = "Voto enviado";
}

/* ========================= */
/*        CODIGOS             */
/* ========================= */
window.canjearCodigo = function(){
    const val = document.getElementById("codigoInput").value;
    if(val.length < 4){
        document.getElementById("codigoResultado").innerText = "CÃ³digo invÃ¡lido";
        return;
    }
    document.getElementById("codigoResultado").innerText = "CÃ³digo aceptado";
}

/* ========================= */
/*        ANUNCIOS            */
/* ========================= */
const anunciosRef = ref(db,"anuncios");

onValue(anunciosRef, snap=>{
    const data = snap.val() || {};
    const div = document.getElementById("anuncios-list");
    div.innerHTML="";
    Object.values(data).forEach(a=>{
        div.innerHTML += `<p>ðŸ“¢ ${a.texto}</p>`;
    });
});

/* ========================= */
/*         ADMIN              */
/* ========================= */
window.loginAdmin = function(){
    const u = document.getElementById("adminUser").value;
    const p = document.getElementById("adminPass").value;
    if(u==="admin" && p==="1234"){
        document.getElementById("adminEstado").innerText="Acceso concedido";
    }else{
        document.getElementById("adminEstado").innerText="Acceso denegado";
    }
}

</script>

</body>
</html>
